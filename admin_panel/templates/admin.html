<!DOCTYPE html>
<html>
<head>
    <title>Admin Quiz</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 20px; }
        .error { color: red; border: 1px solid red; padding: 10px; margin: 15px 0; }
        .success { color: green; }
        .container { max-width: 800px; margin: 0 auto; }
        .question-item { border: 1px solid #ddd; padding: 10px; margin-bottom: 10px; }
    </style>
</head>
<body>
  <div class="container">
    <h2>Admin Quiz Launcher</h2>

    {% if firebase_error %}
      <div class="error">
        <strong>Eroare Firebase:</strong> {{ firebase_error }}
      </div>
    {% endif %}

    <!-- Select Show -->
    <form method="POST">
      <label for="show_id">Alege show:</label>
      <select name="show_id" onchange="this.form.submit()">
        <option value="">-- selectează --</option>
        {% if shows %}
          {% for show in shows %}
            <option value="{{ show }}" {% if show == selected_show %}selected{% endif %}>{{ show }}</option>
          {% endfor %}
        {% else %}
          <option disabled>❌ Nu există show-uri disponibile</option>
        {% endif %}
      </select>
    </form>

    <!-- Questions -->
    {% if selected_show %}
      <h3>Întrebări pentru <code>{{ selected_show }}</code>:</h3>

      {% if questions %}
        <form method="POST">
          <input type="hidden" name="show_id" value="{{ selected_show }}">
          {% for q in questions %}
            <div class="question-item">
              <b>{{ q.text }}</b><br>
              <small>ID: {{ q.id }}</small><br>
              <button name="question_id" value="{{ q.id }}">Lansează această întrebare</button>
            </div>
          {% endfor %}
        </form>
      {% else %}
        <p>⚠️ Nu s-au găsit întrebări pentru acest show.</p>
      {% endif %}
    {% endif %}
    
    <hr>
    <p><a href="/">Înapoi la pagina principală</a></p>
  </div>
</body>
</html>
